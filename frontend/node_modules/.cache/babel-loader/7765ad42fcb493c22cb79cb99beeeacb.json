{"ast":null,"code":"import { CLEAR_CART, COUNT_CART_TOTALS, REMOVE_CART_ITEM, ADD_TO_CART, CREATE_ORDER_BEGIN, CREATE_ORDER_ERROR, CREATE_ORDER_SUCCESS } from '../actions';\nconst cart_reducer = (state, action) => {\n  if (action.type === ADD_TO_CART) {\n    const {\n      id,\n      quantity,\n      food\n    } = action.payload;\n    //check  if id  is  found  in  cart  array\n    const tempItem = state.cart.find(i => i.id === id);\n    if (tempItem) {\n      console.log('ADD TO CART>>>>>>', tempItem);\n\n      //check if  the  item  is  in  the     Cart,  iterate  over it\n      const tempCart = state.cart.map(cartItem => {\n        if (cartItem.id === id) {\n          let newQuantity = cartItem.quantity + quantity;\n          return {\n            ...cartItem,\n            quantity: newQuantity\n          };\n\n          //if  item  is  found  in  cart  array  update  amount\n        } else {\n          return cartItem;\n        }\n      });\n      //save  cart  in  localStorage\n      //TODO: COMMENT TO  TRY  OUT IF  THIS  WORKS\n      // localStorage.setItem('cart', JSON.stringify(tempCart))\n      return {\n        ...state,\n        cart: tempCart,\n        delivery_fee: 100\n      };\n    } else {\n      //if  item  is  not  found  in  cart  array  add  it\n      const newItem = {\n        id: id,\n        name: food.name,\n        quantity: food.quantity,\n        image: food.image,\n        price: food.price\n      };\n      return {\n        ...state,\n        cart: [...state.cart, newItem],\n        delivery_fee: 100\n      };\n    }\n  }\n  if (action.type === COUNT_CART_TOTALS) {\n    //TODO:  change  the Delivery   fee  to  use    Dynamically\n    const {\n      total_price,\n      total_quantity\n    } = state.cart.reduce((total, cartItem) => {\n      const {\n        price,\n        quantity\n      } = cartItem;\n      {\n        /*calculate  the amount of  item(total quantity of  item)*/\n      }\n      total.total_quantity += quantity;\n      total.total_price += price * quantity;\n      console.log('TOTAL>>>>>>>>>', total);\n      return total;\n    }, {\n      total_price: 0,\n      total_quantity: 0\n    });\n    console.log(total_price, total_quantity);\n    return {\n      ...state,\n      total_price,\n      total_quantity,\n      delivery_fee: 100\n    };\n  }\n  if (action.type === CLEAR_CART) {\n    return {\n      ...state,\n      cart: []\n    };\n  }\n  //remove single item  from cart\n  if (action.type === REMOVE_CART_ITEM) {\n    const id = action.payload;\n    console.log(state.cart);\n    let tempcart2 = state.cart;\n    console.log('IS ID>>>', id);\n    let filteredOrder = tempcart2.filter(item => item.id !== id);\n    return {\n      ...state,\n      cart: filteredOrder\n    };\n  }\n  if (action.type === CREATE_ORDER_BEGIN) {\n    console.log('ORDER CREATE BEGIN');\n    return {\n      ...state,\n      is_loading: true,\n      is_order_created_success: false,\n      is_order_error: false,\n      delivery_fee: 0,\n      order: null\n    };\n  }\n  if (action.type === CREATE_ORDER_SUCCESS) {\n    console.log('ORDER CREATE SUCCESS');\n    console.log();\n    return {\n      ...state,\n      is_loading: false,\n      is_order_created_success: true,\n      is_order_error: false,\n      delivery_fee: 100,\n      order: action.payload\n    };\n  }\n  if (action.type === CREATE_ORDER_ERROR) {\n    console.log('ORDER CREATE ERROR');\n    return {\n      ...state,\n      is_loading: false,\n      is_order_created_success: false,\n      is_order_error: true,\n      delivery_fee: 0,\n      order: null\n    };\n  }\n  throw new Error(`No matching ${action.type} -action  type`);\n  //check for  another Action Dispatch\n};\nexport default cart_reducer;","map":{"version":3,"names":["CLEAR_CART","COUNT_CART_TOTALS","REMOVE_CART_ITEM","ADD_TO_CART","CREATE_ORDER_BEGIN","CREATE_ORDER_ERROR","CREATE_ORDER_SUCCESS","cart_reducer","state","action","type","id","quantity","food","payload","tempItem","cart","find","i","console","log","tempCart","map","cartItem","newQuantity","delivery_fee","newItem","name","image","price","total_price","total_quantity","reduce","total","tempcart2","filteredOrder","filter","item","is_loading","is_order_created_success","is_order_error","order","Error"],"sources":["/home/frankessien/myworkspace/food-delivery-api/frontend/src/reducers/cart_reducer.js"],"sourcesContent":["import {\n  CLEAR_CART,\n  COUNT_CART_TOTALS,\n  REMOVE_CART_ITEM,\n  ADD_TO_CART,\n  CREATE_ORDER_BEGIN,\n  CREATE_ORDER_ERROR,\n  CREATE_ORDER_SUCCESS\n} from '../actions'\n\nconst cart_reducer = (state, action) => {\n  if (action.type === ADD_TO_CART) {\n    const { id, quantity, food } = action.payload\n    //check  if id  is  found  in  cart  array\n    const tempItem = state.cart.find(i => i.id === id)\n    if (tempItem) {\n      console.log('ADD TO CART>>>>>>', tempItem)\n\n      //check if  the  item  is  in  the     Cart,  iterate  over it\n      const tempCart = state.cart.map(cartItem => {\n        if (cartItem.id === id) {\n          let newQuantity = cartItem.quantity + quantity\n\n          return { ...cartItem, quantity: newQuantity }\n\n          //if  item  is  found  in  cart  array  update  amount\n        } else {\n          return cartItem\n        }\n      })\n      //save  cart  in  localStorage\n      //TODO: COMMENT TO  TRY  OUT IF  THIS  WORKS\n      // localStorage.setItem('cart', JSON.stringify(tempCart))\n      return { ...state, cart: tempCart, delivery_fee: 100 }\n    } else {\n      //if  item  is  not  found  in  cart  array  add  it\n      const newItem = {\n        id: id,\n        name: food.name,\n        quantity: food.quantity,\n        image: food.image,\n        price: food.price\n      }\n      return { ...state, cart: [...state.cart, newItem], delivery_fee: 100 }\n    }\n  }\n  if (action.type === COUNT_CART_TOTALS) {\n    //TODO:  change  the Delivery   fee  to  use    Dynamically\n    const { total_price, total_quantity } = state.cart.reduce(\n      (total, cartItem) => {\n        const { price, quantity } = cartItem\n        {\n          /*calculate  the amount of  item(total quantity of  item)*/\n        }\n        total.total_quantity += quantity\n        total.total_price += price * quantity\n        console.log('TOTAL>>>>>>>>>', total)\n\n        return total\n      },\n      {\n        total_price: 0,\n        total_quantity: 0\n      }\n    )\n    console.log(total_price, total_quantity)\n    return { ...state, total_price, total_quantity, delivery_fee: 100 }\n  }\n  if (action.type === CLEAR_CART) {\n    return { ...state, cart: [] }\n  }\n  //remove single item  from cart\n  if (action.type === REMOVE_CART_ITEM) {\n    const id = action.payload\n    console.log(state.cart)\n    let tempcart2 = state.cart\n    console.log('IS ID>>>', id)\n    let filteredOrder = tempcart2.filter(item => item.id !== id)\n    return { ...state, cart: filteredOrder }\n  }\n\n  if (action.type === CREATE_ORDER_BEGIN) {\n    console.log('ORDER CREATE BEGIN')\n\n    return {\n      ...state,\n      is_loading: true,\n      is_order_created_success: false,\n      is_order_error: false,\n      delivery_fee: 0,\n\n      order: null\n    }\n  }\n\n  if (action.type === CREATE_ORDER_SUCCESS) {\n    console.log('ORDER CREATE SUCCESS')\n\n    console.log()\n\n    return {\n      ...state,\n      is_loading: false,\n      is_order_created_success: true,\n      is_order_error: false,\n      delivery_fee: 100,\n\n      order: action.payload\n    }\n  }\n  if (action.type === CREATE_ORDER_ERROR) {\n    console.log('ORDER CREATE ERROR')\n\n    return {\n      ...state,\n      is_loading: false,\n      is_order_created_success: false,\n      is_order_error: true,\n      delivery_fee: 0,\n      order: null\n    }\n  }\n\n  throw new Error(`No matching ${action.type} -action  type`)\n  //check for  another Action Dispatch\n}\n\nexport default cart_reducer\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}