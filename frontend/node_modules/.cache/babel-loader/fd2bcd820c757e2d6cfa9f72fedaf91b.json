{"ast":null,"code":"var _jsxFileName = \"/home/frankessien/myworkspace/food-delivery-api/frontend/src/components/Login.js\";\nimport React, { useEffect, useState } from 'react';\nimport { useAuthContext, token } from '../context/auth_context';\nimport { useFoodsContext } from '../context/foods_context';\nimport { Cart, Foods } from '../pages';\nimport { Link, Redirect, useNavigate, useLocation } from 'react-router-dom';\nimport { ScaleLoader } from 'react-spinners';\nconst Login = () => {\n  const [userPassword, setUserPassword] = useState('');\n  const [userEmail, setUserEmail] = useState('');\n  const [isLoginLoading, setIsLoginLoading] = useState(false);\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  let navigate = useNavigate();\n  const location = useLocation();\n\n  // const [previousPage, setPreviousPage] = useState(window.location.href)\n  // let navigate = useNavigate()\n\n  const {\n    loginUser,\n    is_registered,\n    is_logged_in,\n    userId,\n    is_error,\n    is_authenticated,\n    token,\n    user\n  } = useAuthContext();\n  const {\n    fetchFoods,\n    foods_loading\n  } = useFoodsContext();\n  const handleSubmit = e => {\n    e.preventDefault();\n    console.log(userPassword, userEmail);\n    loginUser(userEmail, userPassword);\n  };\n  useEffect(() => {\n    let timeCheck = setTimeout(() => {\n      var _location$state;\n      fetchFoods();\n      navigate((_location$state = location.state) === null || _location$state === void 0 ? void 0 : _location$state.from);\n    }, 2000);\n    return () => clearTimeout(timeCheck);\n  }, [userEmail, userPassword, is_error, is_logged_in]);\n  if (is_logged_in) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(ScaleLoader, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 9\n      }\n    }));\n  } else {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      class: \"login-container\",\n      onSubmit: handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"email-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 13\n      }\n    }, \" Login \"), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"email\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      required: true,\n      type: \"email\",\n      class: \"email-input-text\",\n      placeholder: \"enter email\",\n      autofocus: true,\n      value: userEmail,\n      name: \"userEmail\",\n      onChange: e => setUserEmail(e.target.value),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"password-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"password\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      required: true,\n      type: \"text\",\n      class: \"password-input-text\",\n      placeholder: \"enter password\",\n      autofocus: true,\n      value: userPassword,\n      name: \"userPassword\",\n      onChange: e => setUserPassword(e.target.value),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"signup-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      class: \"sign-up\",\n      type: \"submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 13\n      }\n    }, \"Login\")), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"password-reset-login\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      href: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 13\n      }\n    }, \"Home page\"), /*#__PURE__*/React.createElement(\"a\", {\n      href: \"./index.html\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 13\n      }\n    }, \" forgot password? Reset password\"))));\n  }\n};\nexport default Login;","map":{"version":3,"names":["React","useEffect","useState","useAuthContext","token","useFoodsContext","Cart","Foods","Link","Redirect","useNavigate","useLocation","ScaleLoader","Login","userPassword","setUserPassword","userEmail","setUserEmail","isLoginLoading","setIsLoginLoading","isLoggedIn","setIsLoggedIn","navigate","location","loginUser","is_registered","is_logged_in","userId","is_error","is_authenticated","user","fetchFoods","foods_loading","handleSubmit","e","preventDefault","console","log","timeCheck","setTimeout","_location$state","state","from","clearTimeout","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","class","onSubmit","required","type","placeholder","autofocus","value","name","onChange","target","href"],"sources":["/home/frankessien/myworkspace/food-delivery-api/frontend/src/components/Login.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\n\nimport { useAuthContext, token } from '../context/auth_context'\n\nimport { useFoodsContext } from '../context/foods_context'\nimport { Cart, Foods } from '../pages'\nimport { Link, Redirect, useNavigate, useLocation } from 'react-router-dom'\nimport { ScaleLoader } from 'react-spinners'\n\nconst Login = () => {\n  const [userPassword, setUserPassword] = useState('')\n  const [userEmail, setUserEmail] = useState('')\n  const [isLoginLoading, setIsLoginLoading] = useState(false)\n  const [isLoggedIn, setIsLoggedIn] = useState(false)\n  let navigate = useNavigate()\n  const location = useLocation()\n\n  // const [previousPage, setPreviousPage] = useState(window.location.href)\n  // let navigate = useNavigate()\n\n  const {\n    loginUser,\n    is_registered,\n    is_logged_in,\n    userId,\n    is_error,\n    is_authenticated,\n    token,\n\n    user\n  } = useAuthContext()\n  const { fetchFoods, foods_loading } = useFoodsContext()\n\n  const handleSubmit = e => {\n    e.preventDefault()\n    console.log(userPassword, userEmail)\n    loginUser(userEmail, userPassword)\n  }\n  useEffect(() => {\n    let timeCheck = setTimeout(() => {\n      fetchFoods()\n      navigate(location.state?.from)\n    }, 2000)\n    return () => clearTimeout(timeCheck)\n  }, [userEmail, userPassword, is_error, is_logged_in])\n  if (is_logged_in) {\n    return (\n      <div>\n        <ScaleLoader />\n      </div>\n    )\n  } else {\n    return (\n      <div>\n        <form class='login-container' onSubmit={handleSubmit}>\n          <div class='email-container'>\n            <h2> Login </h2>\n            <div class='email'></div>\n            <input\n              required\n              type='email'\n              class='email-input-text'\n              placeholder='enter email'\n              autofocus\n              value={userEmail}\n              name='userEmail'\n              onChange={e => setUserEmail(e.target.value)}\n            />\n          </div>\n          <div class='password-container'>\n            <div class='password'></div>\n            <input\n              required\n              type='text'\n              class='password-input-text'\n              placeholder='enter password'\n              autofocus\n              value={userPassword}\n              name='userPassword'\n              onChange={e => setUserPassword(e.target.value)}\n            />\n          </div>\n          <div class='signup-container'>\n            <button class='sign-up' type='submit'>\n              Login\n            </button>\n          </div>\n\n          <div class='password-reset-login'>\n            <a href='/'>Home page</a>\n\n            <a href='./index.html'> forgot password? Reset password</a>\n          </div>\n        </form>\n      </div>\n    )\n  }\n}\n\nexport default Login\n"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAElD,SAASC,cAAc,EAAEC,KAAK,QAAQ,yBAAyB;AAE/D,SAASC,eAAe,QAAQ,0BAA0B;AAC1D,SAASC,IAAI,EAAEC,KAAK,QAAQ,UAAU;AACtC,SAASC,IAAI,EAAEC,QAAQ,EAAEC,WAAW,EAAEC,WAAW,QAAQ,kBAAkB;AAC3E,SAASC,WAAW,QAAQ,gBAAgB;AAE5C,MAAMC,KAAK,GAAGA,CAAA,KAAM;EAClB,MAAM,CAACC,YAAY,EAAEC,eAAe,CAAC,GAAGb,QAAQ,CAAC,EAAE,CAAC;EACpD,MAAM,CAACc,SAAS,EAAEC,YAAY,CAAC,GAAGf,QAAQ,CAAC,EAAE,CAAC;EAC9C,MAAM,CAACgB,cAAc,EAAEC,iBAAiB,CAAC,GAAGjB,QAAQ,CAAC,KAAK,CAAC;EAC3D,MAAM,CAACkB,UAAU,EAAEC,aAAa,CAAC,GAAGnB,QAAQ,CAAC,KAAK,CAAC;EACnD,IAAIoB,QAAQ,GAAGZ,WAAW,CAAC,CAAC;EAC5B,MAAMa,QAAQ,GAAGZ,WAAW,CAAC,CAAC;;EAE9B;EACA;;EAEA,MAAM;IACJa,SAAS;IACTC,aAAa;IACbC,YAAY;IACZC,MAAM;IACNC,QAAQ;IACRC,gBAAgB;IAChBzB,KAAK;IAEL0B;EACF,CAAC,GAAG3B,cAAc,CAAC,CAAC;EACpB,MAAM;IAAE4B,UAAU;IAAEC;EAAc,CAAC,GAAG3B,eAAe,CAAC,CAAC;EAEvD,MAAM4B,YAAY,GAAGC,CAAC,IAAI;IACxBA,CAAC,CAACC,cAAc,CAAC,CAAC;IAClBC,OAAO,CAACC,GAAG,CAACvB,YAAY,EAAEE,SAAS,CAAC;IACpCQ,SAAS,CAACR,SAAS,EAAEF,YAAY,CAAC;EACpC,CAAC;EACDb,SAAS,CAAC,MAAM;IACd,IAAIqC,SAAS,GAAGC,UAAU,CAAC,MAAM;MAAA,IAAAC,eAAA;MAC/BT,UAAU,CAAC,CAAC;MACZT,QAAQ,EAAAkB,eAAA,GAACjB,QAAQ,CAACkB,KAAK,cAAAD,eAAA,uBAAdA,eAAA,CAAgBE,IAAI,CAAC;IAChC,CAAC,EAAE,IAAI,CAAC;IACR,OAAO,MAAMC,YAAY,CAACL,SAAS,CAAC;EACtC,CAAC,EAAE,CAACtB,SAAS,EAAEF,YAAY,EAAEc,QAAQ,EAAEF,YAAY,CAAC,CAAC;EACrD,IAAIA,YAAY,EAAE;IAChB,oBACE1B,KAAA,CAAA4C,aAAA;MAAAC,MAAA;MAAAC,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,gBACElD,KAAA,CAAA4C,aAAA,CAAChC,WAAW;MAAAiC,MAAA;MAAAC,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,CAAE,CACX,CAAC;EAEV,CAAC,MAAM;IACL,oBACElD,KAAA,CAAA4C,aAAA;MAAAC,MAAA;MAAAC,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,gBACElD,KAAA,CAAA4C,aAAA;MAAMO,KAAK,EAAC,iBAAiB;MAACC,QAAQ,EAAEnB,YAAa;MAAAY,MAAA;MAAAC,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,gBACnDlD,KAAA,CAAA4C,aAAA;MAAKO,KAAK,EAAC,iBAAiB;MAAAN,MAAA;MAAAC,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,gBAC1BlD,KAAA,CAAA4C,aAAA;MAAAC,MAAA;MAAAC,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,GAAI,SAAW,CAAC,eAChBlD,KAAA,CAAA4C,aAAA;MAAKO,KAAK,EAAC,OAAO;MAAAN,MAAA;MAAAC,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,CAAM,CAAC,eACzBlD,KAAA,CAAA4C,aAAA;MACES,QAAQ;MACRC,IAAI,EAAC,OAAO;MACZH,KAAK,EAAC,kBAAkB;MACxBI,WAAW,EAAC,aAAa;MACzBC,SAAS;MACTC,KAAK,EAAEzC,SAAU;MACjB0C,IAAI,EAAC,WAAW;MAChBC,QAAQ,EAAEzB,CAAC,IAAIjB,YAAY,CAACiB,CAAC,CAAC0B,MAAM,CAACH,KAAK,CAAE;MAAAZ,MAAA;MAAAC,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,CAC7C,CACE,CAAC,eACNlD,KAAA,CAAA4C,aAAA;MAAKO,KAAK,EAAC,oBAAoB;MAAAN,MAAA;MAAAC,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,gBAC7BlD,KAAA,CAAA4C,aAAA;MAAKO,KAAK,EAAC,UAAU;MAAAN,MAAA;MAAAC,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,CAAM,CAAC,eAC5BlD,KAAA,CAAA4C,aAAA;MACES,QAAQ;MACRC,IAAI,EAAC,MAAM;MACXH,KAAK,EAAC,qBAAqB;MAC3BI,WAAW,EAAC,gBAAgB;MAC5BC,SAAS;MACTC,KAAK,EAAE3C,YAAa;MACpB4C,IAAI,EAAC,cAAc;MACnBC,QAAQ,EAAEzB,CAAC,IAAInB,eAAe,CAACmB,CAAC,CAAC0B,MAAM,CAACH,KAAK,CAAE;MAAAZ,MAAA;MAAAC,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,CAChD,CACE,CAAC,eACNlD,KAAA,CAAA4C,aAAA;MAAKO,KAAK,EAAC,kBAAkB;MAAAN,MAAA;MAAAC,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,gBAC3BlD,KAAA,CAAA4C,aAAA;MAAQO,KAAK,EAAC,SAAS;MAACG,IAAI,EAAC,QAAQ;MAAAT,MAAA;MAAAC,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,GAAC,OAE9B,CACL,CAAC,eAENlD,KAAA,CAAA4C,aAAA;MAAKO,KAAK,EAAC,sBAAsB;MAAAN,MAAA;MAAAC,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,gBAC/BlD,KAAA,CAAA4C,aAAA;MAAGiB,IAAI,EAAC,GAAG;MAAAhB,MAAA;MAAAC,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,GAAC,WAAY,CAAC,eAEzBlD,KAAA,CAAA4C,aAAA;MAAGiB,IAAI,EAAC,cAAc;MAAAhB,MAAA;MAAAC,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,GAAC,kCAAmC,CACvD,CACD,CACH,CAAC;EAEV;AACF,CAAC;AAED,eAAerC,KAAK"},"metadata":{},"sourceType":"module"}